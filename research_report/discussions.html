
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Discussions &#8212; Maintainable implementation of re-executable benchmark to track changes overtime</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Contributions" href="contributions.html" />
    <link rel="prev" title="Results" href="results.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint">⚠️This is a working draft for discussion and feedback!⚠️</div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Maintainable implementation of re-executable benchmark to track changes overtime</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../index.html">
                    Abstract
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Research report
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="introductions.html">
   Introductions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="software_implemetation.html">
   Software implementation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="benchmark_methods.html">
   Benchmark methods
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="results.html">
   Results
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Discussions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="contributions.html">
   Contributions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="references.html">
   References
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Appendices and supplemental material
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../supplementary_materials/CITATION.html">
   fMRIPrep preprocessing details
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../supplementary_materials/report_ds000228.html">
   ds000228
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../supplementary_materials/report_ds000030.html">
   ds000030
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../supplementary_materials/ohbm2022abstract.html">
   OHBM 2022 abstract - submitted text
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Workflow documentation
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../docs/tldr.html">
   Quick start
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../docs/setup.html">
   Setup to run all customised scripts for preprocessing
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../docs/fmriprep.html">
   Preprocessing fMRI data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../docs/timeseires_metrics.html">
   Generate the reports
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/SIMEXP/fmriprep-denoise-benchmark/main?urlpath=tree/content/research_report/discussions.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/SIMEXP/fmriprep-denoise-benchmark"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/SIMEXP/fmriprep-denoise-benchmark/issues/new?title=Issue%20on%20page%20%2Fresearch_report/discussions.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/research_report/discussions.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download notebook file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-code"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        <a href="../_sources/research_report/discussions.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#residual-motion-in-connectivity-edges-was-not-found-among-most-methods">
   Residual motion in connectivity edges was not found among most methods
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#distance-dependency-of-connectivity-edges-was-best-removed-by-an-aggressive-scrubbing-approach">
   Distance dependency of connectivity edges was best removed by an aggressive scrubbing approach
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#correlation-between-motion-and-network-modularity-persists-and-global-signal-alters-network-modularity">
   Correlation between motion and network modularity persists and global signal alters network modularity
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#high-degrees-of-freedom-loss-with-using-compcor-components-up-to-50-variance">
   High degrees of freedom loss with using CompCor components up to 50% variance
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#other-considerations">
   Other considerations
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#general-suggestions">
   General suggestions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#future-directions">
   Future directions
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Discussions</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#residual-motion-in-connectivity-edges-was-not-found-among-most-methods">
   Residual motion in connectivity edges was not found among most methods
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#distance-dependency-of-connectivity-edges-was-best-removed-by-an-aggressive-scrubbing-approach">
   Distance dependency of connectivity edges was best removed by an aggressive scrubbing approach
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#correlation-between-motion-and-network-modularity-persists-and-global-signal-alters-network-modularity">
   Correlation between motion and network modularity persists and global signal alters network modularity
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#high-degrees-of-freedom-loss-with-using-compcor-components-up-to-50-variance">
   High degrees of freedom loss with using CompCor components up to 50% variance
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#other-considerations">
   Other considerations
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#general-suggestions">
   General suggestions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#future-directions">
   Future directions
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="discussions">
<h1>Discussions<a class="headerlink" href="#discussions" title="Permalink to this headline">#</a></h1>
<!-- Take home message
- fMRIPrep does a good job 
- Quality control your data
- Choice of atlas doesn't impact the results much
- ICA-AROMA is not magical
 -->
<p>fMRIPrep ensured to provide minimally preprocessed fMRI data and a large collection of nuisance regressors in the standard way.
They provided extended documentation to guide the user for regressor selection and choices for subsequent analysis.
However, selecting the correct confound variables for denoising minimally preprocessed fMRI data is still a daunting task.
There’s no guarantee that people are reading the documentation to select the right things. <!-- This sentence is too blunt and harsh -->
<code class="docutils literal notranslate"><span class="pre">load_confounds</span></code> aims to provide an API to simplify the process of nuisance regressors selection.
Built with careful curation of the literature, it ensures users select the sensible nuisance regressors.
It also provides predefined strategies with the best understanding of the literature.
The performance of these denoising strategies has yet to be examined.
The current research aims to provide a benchmark on the performance of common methods in the denoising literature for functional connectivity analysis.
We only include denoise strategies that apply to the sample.
In addition, we set some exclusion criteria on the sample to show the result on reasonable quality subjects only.
The aim is to provide a benchmark in a realistic context as much as possible.</p>
<p>We performed the benchmark on two open access datasets.
<code class="docutils literal notranslate"><span class="pre">ds000228</span></code> allows us to examine the difference between child and adult samples.
<code class="docutils literal notranslate"><span class="pre">ds000030</span></code> includes healthy control and patients of three different psychiatric conditions.
We used three different multi-resolution atlases in this benchmark (MIST, DiFuMo, Schaefer)
as well as one common atlas in the previous benchmark literature,
the Gordon atlas with 333 parcels, to compare with the past literature using different pipelines.
Subjects with more than 80% of volumes with a framewise displacement exceeding 0.2 mm,
and mean framewise displacement above 0.55 mm were excluded from the analysis.</p>
<div class="section" id="residual-motion-in-connectivity-edges-was-not-found-among-most-methods">
<h2>Residual motion in connectivity edges was not found among most methods<a class="headerlink" href="#residual-motion-in-connectivity-edges-was-not-found-among-most-methods" title="Permalink to this headline">#</a></h2>
<!-- QC-FC -->
<p>When examining QC-FC, all strategies, including the baseline (i.e. data that was high-pass filtered),
show very little residual impact of motion on functional connectivity, except <code class="docutils literal notranslate"><span class="pre">aroma+gsr</span></code>.
<code class="docutils literal notranslate"><span class="pre">aroma+gsr</span></code> did not perform well in the healthy control in <code class="docutils literal notranslate"><span class="pre">ds000030</span></code> and the child sample in <code class="docutils literal notranslate"><span class="pre">ds000228</span></code>.
The healthy control in <code class="docutils literal notranslate"><span class="pre">ds000030</span></code> shows more variability possibly due to the larger sample size (88 subjects) compared to the patient samples (ranging from 19 – 32 subjects).
Similarly, <code class="docutils literal notranslate"><span class="pre">ds000228</span></code> contains twice as many child samples compared to the adult samples (51 vs 24 subjects).
There’s a possibility of the global signal regressor reintroducing motion to the data.
In fMRIPrep, the whole brain global signal regressor and the estimated head-motion parameters were calculated on the output from their regular pipeline (i.e. before denoising).
The <code class="docutils literal notranslate"><span class="pre">aroma</span></code> strategy performs as expected, which is consistent with the <a class="reference external" href="https://github.com/nipreps/fmriprep-notebooks/blob/9933a628dfb759dc73e61701c144d67898b92de0/05%20-%20Discussion%20AROMA%20confounds%20-%20issue-817%20%5BJ.%20Kent%5D.ipynb">simulation shown in fMRIPrep documentation</a>.
The global signal regressor might reintroduce motion.
This would be consistent with the suggestion that confound regressors should be recalculated when using AROMA-cleaned data in the literature <span id="id1">[<a class="reference internal" href="references.html#id36" title="Michael N. Hallquist, Kai Hwang, and Beatriz Luna. The nuisance of nuisance regression: Spectral misspecification in a common approach to resting-state fMRI preprocessing reintroduces noise and obscures functional connectivity. NeuroImage, 82:208–225, November 2013. doi:10.1016/j.neuroimage.2013.05.116.">Hallquist <em>et al.</em>, 2013</a>, <a class="reference internal" href="references.html#id37" title="Martin A. Lindquist, Stephan Geuter, Tor D. Wager, and Brian S. Caffo. Modular preprocessing pipelines can reintroduce artifacts into fMRI data. Human Brain Mapping, 40(8):2358–2376, January 2019. doi:10.1002/hbm.24528.">Lindquist <em>et al.</em>, 2019</a>]</span>.</p>
</div>
<div class="section" id="distance-dependency-of-connectivity-edges-was-best-removed-by-an-aggressive-scrubbing-approach">
<h2>Distance dependency of connectivity edges was best removed by an aggressive scrubbing approach<a class="headerlink" href="#distance-dependency-of-connectivity-edges-was-best-removed-by-an-aggressive-scrubbing-approach" title="Permalink to this headline">#</a></h2>
<!-- Distance dependency -->
<p>For the distance dependency effect on QC-FC, a score close to zero indicates a method to reduce the correlation between residual motion in functional connectivity and pairwise node distance.
We found scrubbing with a 0.2 mm threshold mitigates distance dependency well consistently regardless of the type of subject.
DiFuMo on adult subjects across both datasets shows consistent results in reducing the impact of motion on distance dependency.</p>
</div>
<div class="section" id="correlation-between-motion-and-network-modularity-persists-and-global-signal-alters-network-modularity">
<h2>Correlation between motion and network modularity persists and global signal alters network modularity<a class="headerlink" href="#correlation-between-motion-and-network-modularity-persists-and-global-signal-alters-network-modularity" title="Permalink to this headline">#</a></h2>
<!-- network modularity -->
<p>To quantify the impact of confound removal on meaningful signals, we evaluated the modularity quality of the connectomes.
The correlation between motion and modularity was not eliminated by any methods.
For the mean modularity score, we can see two clear cluster grouping methods separated by including the global signal regressor or not.
Including global signal regressor increases the network modularity in <code class="docutils literal notranslate"><span class="pre">simple+gsr</span></code>, <code class="docutils literal notranslate"><span class="pre">scrubbing.5+gsr</span></code>, <code class="docutils literal notranslate"><span class="pre">scrubbing.2+gsr</span></code>, and <code class="docutils literal notranslate"><span class="pre">aroma+gsr</span></code> (with a smaller magnitude).
The result is consistent with the fact that global signal increases negative values to functional connectome
(see nilearn examples visualisation of connectome <a class="reference external" href="https://nilearn.github.io/stable/auto_examples/03_connectivity/plot_signal_extraction.html#the-impact-of-global-signal-removal">with and without global signal regression</a>)
by shifting the value to approximately zero-centred <span id="id2">[<a class="reference internal" href="references.html#id27" title="Kevin Murphy, Rasmus M. Birn, Daniel A. Handwerker, Tyler B. Jones, and Peter A. Bandettini. The impact of global signal regression on resting state correlations: are anti-correlated networks introduced? NeuroImage, 44(3):893–905, February 2009. doi:10.1016/j.neuroimage.2008.09.036.">Murphy <em>et al.</em>, 2009</a>]</span>.</p>
</div>
<div class="section" id="high-degrees-of-freedom-loss-with-using-compcor-components-up-to-50-variance">
<h2>High degrees of freedom loss with using CompCor components up to 50% variance<a class="headerlink" href="#high-degrees-of-freedom-loss-with-using-compcor-components-up-to-50-variance" title="Permalink to this headline">#</a></h2>
<!-- dof loss -->
<p>Aside from the benchmark on denoising performance, another important factor is the degree of freedom loss.
Losing degrees of freedom means the variance left for the subsequent analysis will be limited.
The default CompCor output of fMRIPrep (the 50% variance) resulted in the highest number of regressors used during denoising.
Contrary to the previous literature <span id="id3">[<a class="reference internal" href="references.html#id20" title="Linden Parkes, Ben Fulcher, Murat Yücel, and Alex Fornito. An evaluation of the efficacy, reliability, and sensitivity of motion correction strategies for resting-state functional mri. NeuroImage, 171:415–436, May 2018. doi:10.1016/j.neuroimage.2017.12.073.">Parkes <em>et al.</em>, 2018</a>]</span> we do not see much advantage of ICA-AROMA.
The independent components put the number of regressors in a similar range to the <code class="docutils literal notranslate"><span class="pre">simple</span></code> and <code class="docutils literal notranslate"><span class="pre">compcor6</span></code> strategies.
Scrubbing at 0.5 mm or 0.2 mm shows a difference between strategies;
within each dataset, this difference persists across groups.</p>
</div>
<div class="section" id="other-considerations">
<h2>Other considerations<a class="headerlink" href="#other-considerations" title="Permalink to this headline">#</a></h2>
<!-- other things to consider -->
<p>We included different types of the atlas in the current analysis.
We got clear outliers with the MIST atlas including decompositions of a low number of parcels.
For any atlas with 64 or above parcels, we show that atlas selection did not bring critical differences to the benchmark.
Volumetric data-based atlas, both probability and discrete atlas perform similarly.
Surface-based Schaefer atlas provides less variance across different resolutions.</p>
<p>We showed the difference between the child and adult samples cannot be eliminated by including age as a covariate in <code class="docutils literal notranslate"><span class="pre">ds000228</span></code>.
Moreover, the loss of degrees of freedom shows that two samples require a drastically different number of regressors for <code class="docutils literal notranslate"><span class="pre">compcor</span></code> and <code class="docutils literal notranslate"><span class="pre">aroma</span></code>-based methods.
<code class="docutils literal notranslate"><span class="pre">simple</span></code> might be the better strategy if the inconsistency of loss of degrees of freedom is not desired.
For the clinical groups in <code class="docutils literal notranslate"><span class="pre">ds000030</span></code>, we only see differences between the control and the schizophrenia group in gross framewise displacement.
The remaining results are too fussy to make a reliable observation amongst the clinical groups.
The limitation of the current results lies in the small and uneven subgroups in each dataset.
The small sample size constrains the conclusion we can draw from the comparison.</p>
</div>
<div class="section" id="general-suggestions">
<h2>General suggestions<a class="headerlink" href="#general-suggestions" title="Permalink to this headline">#</a></h2>
<p>We speculate that the differences highlighted in the literature could be a result of including strawman methods that are not applicable or commonly used in a practical research setting  (see 2P, tCompCor in <span id="id4">[<a class="reference internal" href="references.html#id18" title="Rastko Ciric, Daniel H. Wolf, Jonathan D. Power, David R. Roalf, Graham L. Baum, Kosha Ruparel, Russell T. Shinohara, Mark A. Elliott, Simon B. Eickhoff, Christos Davatzikos, Ruben C. Gur, Raquel E. Gur, Danielle S. Bassett, and Theodore D. Satterthwaite. Benchmarking of participant-level confound regression strategies for the control of motion artifact in studies of functional connectivity. NeuroImage, 154(1):174–187, July 2017. doi:10.1016/j.neuroimage.2017.03.020.">Ciric <em>et al.</em>, 2017</a>]</span>),
and including known high motion subjects (children) with young adult sample
(see <span id="id5">[<a class="reference internal" href="references.html#id18" title="Rastko Ciric, Daniel H. Wolf, Jonathan D. Power, David R. Roalf, Graham L. Baum, Kosha Ruparel, Russell T. Shinohara, Mark A. Elliott, Simon B. Eickhoff, Christos Davatzikos, Ruben C. Gur, Raquel E. Gur, Danielle S. Bassett, and Theodore D. Satterthwaite. Benchmarking of participant-level confound regression strategies for the control of motion artifact in studies of functional connectivity. NeuroImage, 154(1):174–187, July 2017. doi:10.1016/j.neuroimage.2017.03.020.">Ciric <em>et al.</em>, 2017</a>]</span> including 8 –22 years old in the same analysis). <!-- please help me with more diplomatic way of saying this -->
We performed partial correlation for all correlation-based metrics to address the covariate introduced by age.
However, the differences between adult and child samples persist.
With real-data applicable methods and motion-based data exclusion, combining all metrics evaluated,
we find it difficult to conclude the best method for different types of subjects.
ICA-AROMA did not stand out in our benchmark as the previous benchmarks highlighted <span id="id6">[<a class="reference internal" href="references.html#id18" title="Rastko Ciric, Daniel H. Wolf, Jonathan D. Power, David R. Roalf, Graham L. Baum, Kosha Ruparel, Russell T. Shinohara, Mark A. Elliott, Simon B. Eickhoff, Christos Davatzikos, Ruben C. Gur, Raquel E. Gur, Danielle S. Bassett, and Theodore D. Satterthwaite. Benchmarking of participant-level confound regression strategies for the control of motion artifact in studies of functional connectivity. NeuroImage, 154(1):174–187, July 2017. doi:10.1016/j.neuroimage.2017.03.020.">Ciric <em>et al.</em>, 2017</a>, <a class="reference internal" href="references.html#id20" title="Linden Parkes, Ben Fulcher, Murat Yücel, and Alex Fornito. An evaluation of the efficacy, reliability, and sensitivity of motion correction strategies for resting-state functional mri. NeuroImage, 171:415–436, May 2018. doi:10.1016/j.neuroimage.2017.12.073.">Parkes <em>et al.</em>, 2018</a>]</span>.</p>
<p>Although the data-driven methods were invented to solve the loss in degrees of freedom for the head motion-based strategy,
we did not observe a clear advantage.
There are a few data-driven strategies that researchers should adopt with caution when using fMRIPrep outputs.
For the CompCor-based strategy, the 50% variance approach <code class="docutils literal notranslate"><span class="pre">compcor</span></code> performed comparably to the 6 component strategy <code class="docutils literal notranslate"><span class="pre">compcor6</span></code> with a significant loss in degrees of freedom.
<code class="docutils literal notranslate"><span class="pre">aroma+gsr</span></code> produces concerning results on the QC/FC measures being the only method with an inconsistent amount of edgest correlating with mean framewise displacement.
The performance of <code class="docutils literal notranslate"><span class="pre">scrubbing.5</span></code> is similar to <code class="docutils literal notranslate"><span class="pre">simple</span></code>,
suggesting that a loose scrubbing threshold might not bring many advantages compared to the more stringent threshold and at risk of losing degrees of freedom.
For the remaining strategies, we would suggest researchers apply denoising strategies that best fit their needs.
Data-driven, component-based methods (<code class="docutils literal notranslate"><span class="pre">aroma</span></code>, <code class="docutils literal notranslate"><span class="pre">compcor</span></code>, and <code class="docutils literal notranslate"><span class="pre">compcor6</span></code>) can be applied to data with a high number of volumes.
We still recommend users investigate the ratio of the number of regressors to the full length of the scan.
They might not be desirable for users who wish to have an explicit definition for their regressors.
For users who wish to have an explicit and simple definition of the nuisance regressors, <code class="docutils literal notranslate"><span class="pre">simple</span></code> is a sufficient approach, and <code class="docutils literal notranslate"><span class="pre">scrubbing.2</span></code> is great if network structure is a priority and timeseries property is not needed.
The variation of any methods involving  global signal regressors should be applied with caution as it highlights the network property of the data (for more on this topic, please see <span id="id7">[<a class="reference internal" href="references.html#id26" title="Kevin Murphy and Michael D. Fox. Towards a consensus regarding global signal regression for resting state functional connectivity MRI. Neuroimage, 154:169–173, July 2017. doi:10.1016/j.neuroimage.2016.11.052.">Murphy and Fox, 2017</a>, <a class="reference internal" href="references.html#id28" title="Ziad S. Saad, Stephen J. Gotts, Kevin Murphy, Gang Chen, Hang Joon Jo, Alex Martin, and Robert W. Cox. Trouble at rest: how correlation patterns and group differences become distorted after global signal regression. Brain Connectivity, 2(1):25–32, 2012. doi:10.1089/brain.2012.0080.">Saad <em>et al.</em>, 2012</a>]</span>)</p>
</div>
<div class="section" id="future-directions">
<h2>Future directions<a class="headerlink" href="#future-directions" title="Permalink to this headline">#</a></h2>
<div class="margin sidebar">
<p class="sidebar-title"></p>
<div class="tip admonition">
<p class="admonition-title">fMRIPrep long-term support (LTS) release</p>
<p>Read the <a class="reference external" href="https://reproducibility.stanford.edu/fmriprep-lts/">fMRIPrep LTS 20.2.x blog post</a>
to understand more details about the long-term support model and the relevance for reproducibility.</p>
</div>
</div>
<!-- send help PLZ -->
<p>The current work will serve as a benchmark for fMRIPrep users when deciding on the denoising strategy for their analysis workflow.
The confounds variable selection standardised through <code class="docutils literal notranslate"><span class="pre">load_confounds</span></code>,
we showed all regressors generated by fMRIprep perform better than the comparison baseline, except for <code class="docutils literal notranslate"><span class="pre">aroma+gsr</span></code>.
We hope this paper presents a combining case that with the maturity of fMRI preprocessing software (fMRIPrep),
the common denoising strategies are achieving the goal and the choice of strategies is down to the researchers.
There is no definitive best option for denoising but methods that fit the different purposes.</p>
<p>For the software aspect, with the long-term support (LTS) release of fMRIPrep, the results reported here will be applicable for 20.2.x series up to September 2024.
The API <code class="docutils literal notranslate"><span class="pre">load_confounds</span></code> is implemented in <code class="docutils literal notranslate"><span class="pre">nilearn</span></code> and maintained with community feedback. We completed the work with all elements under an open source license, including data sets, software, and code.
Combining with the three elements above,
the reports on these two datasets will be able to regenerate for the future LTS release of fMRIprep.
For fMRIPrep release beyond the LTS version, as long as the API in <code class="docutils literal notranslate"><span class="pre">nilearn</span></code> is maintained,
the code used to generate all current reports can be applied to the same two datasets.
Thus, rebuilding this paper on future fMRIPrep releases can be a potential for verifying the stability of preprocessed results at the dataset level,
complementing the individual reports from fMRIPrep.</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./research_report"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="results.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Results</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="contributions.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Contributions</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Hao-Ting Wang, Natasha Clarke, Steven L Meisler, Hanad Sharmarke, François Paugam, Nicolas Gensollen, Bertrand Thirion, Christopher J Markiewicz, Pierre Bellec<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>